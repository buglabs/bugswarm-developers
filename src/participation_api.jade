!!! 5
html(lang='en')
  head
    include includes/assets


  body

    // NAVIGATION
    include includes/navigation

    // CONTAINER
    .container-fluid

      // SIDEBAR
      .sidebar

        strong Jump to:
        ul.unstyled

      // CONTENT
      .container

        // Path
        .page-header
          a(href='index.html') Home
          |  &rarr;
          a(href='api_documentation.html') API Documentation

        // Header
        h1 Participation
        h2 Overview
        p
          | Resources use the participation API to communicate with swarms. 
          | Resources can send and receive presence notifications, private 
          | messages, and public messages. BUGswarm will also send error
          | messages if an attempt has been made to use the API incorrectly
          | or to do something that is not allowed by the credentials that
          | were provided.
        h3 Presence Notifications
        p
          | Presence notifications indicate that a resource has joined or left
          | the swarm. A resources sends a presence notification to the swarm(s)
          | that it wishes to join. Members of that swarm then receive a 
          | notification that the resource has joined the swarm.
          | Resources can also send presence notifications indicating that they
          | are leaving the swarm.
        p
          | Direct presence notification are sent automatically by BUGswarm to resources
          | that are owned by the same user as a resource that has just
          | connected to BUGswarm. For example, if resources A, B, and C belong
          | to Alice and A and B are connected to BUGswarm then A and B will
          | receive a direct presence message when resource C connects to
          | BUGswarm, and another direct presence message when resource C
          | leaves BUGswarm.
        h3 Messages
        p
          | Messages are sent from one resource to one of the following: all
          | resources in all swarms that the sender has joined, all resources
          | in a specified swarm, or only a specified resource. The message
          | contains data that the recipient can use to determine whether it
          | is receiving a private message or a public message. Messages can
          | be sent between resources that belong to the same swarm and between
          | resources that belong to the same user.
        h3 Errors
        p
          | Errors are sent to the resource when something has gone wrong.
          | Usually this means that a resource has attempted to use the
          | API to do something that is not allowed, such as writing to a swarm
          | when it is a consumer, or attempting to connect to a swarm that it
          | does not belong to. Errors contain a list of HTTP codes and
          | descriptions for each error that occurred during an attempted
          | operation. Some operations my cause more than one error, so the list
          | may have more than one element.
        h2 Using the Streaming API
        h3 URL and Methods
        p
          | The streaming API is available at <br/>
          code http://api.bugswarm.net/stream
          | <br/> with the resource ID and swarm IDs listed as parameters after the
          | URL. For example, to connect to the swarms 
          | 911cbc244827dba9c6dbdd09aff3e5e8fe5eee02 and 
          | 57438aab86c98e09809a775110fd01426daa23c1 with the resource ID
          | b3af18bb34ce8032d20afce5a4b57c73da33e94f you would use this URL: <br/>
          code http://api.bugswarm.net/stream?swarm_id=911cbc244827dba9c6dbdd09aff3e5e8fe5eee02&swarm_id=57438aab86c98e09809a775110fd01426daa23c1&resource_id=b3af18bb34ce8032d20afce5a4b57c73da33e94f
          | <br/>Using HTTP GET allows you to read from the stream, while using HTTP 
          | POST allows reading and writing. You need to set the <br/>
          code x-bugswarmapikey
          | <br/>header to your Participation API key. The stream that is
          | created on a POST request is bidirectional.
        h3 Format
        p
          | Resources send and receive presence notification and messages in 
          | JSON format.
        h4 Presence Notifications
        h5 Sender
        | To join swarms 234 and 333:
        pre.prettyprint.language-javascript
          {"presence": {"to": ["234", "333"]}}
        | To leave swarms 234 and 333:
        pre.prettyprint.language-javascript
          {"presence": {"to": ["234", "333"], type: "unavailable"}}
        h5 Recipient
        | When resource 222 has joined swarm 234:
        pre.prettyprint.language-javascript
          {"presence": {"from": {"swarm": "234", "resource": "222", "user": "c4milo"}}
        | When resource 222 has left swarm 234:
        pre.prettyprint.language-javascript
          {"presence": {"from": {"swarm": "234", "resource": "222", "user": "c4milo"}, "type": "unavailable"}
        | When a resource that is owned by the same user connects to BUGswarm:
        pre.prettyprint.language-javascript
          {"presence": {"from": {"resource": "222"}}}
        | When a resource that is owned by the same user disconnects from BUGswarm:
        pre.prettyprint.language-javascript
          {"presence": {"from": {"resource": "222"} "type": "unavailable"}}
        h4 Messages
        h5 Sender
        | To send a public message to all the swarms that the resource has joined:
        pre.prettyprint.language-javascript
          {"message": {"payload": {"x":1}}}
        | To send a public message to swarms 234 and 123:
        pre.prettyprint.language-javascript
          {"message": {"to": ["234", "123"], "payload": {"x":1}}}
        | To send a private message to resource 222 in swarm 234:
        pre.prettyprint.language-javascript
          {"message": {"to": [{"swarm": "234", "resource": "222"}], "payload": {"y":2}}}
        h5 Recipient
        | When a resource receives public message from resource 123:
        pre.prettyprint.language-javascript
          {"message": {"from": {"swarm": "234", "resource":"123"}, "public": true, "payload": {"x": 1}}}
        | When a resource receives private message from resource 123:
        pre.prettyprint.language-javascript
          {"message": {"from": {"swarm": "234", resource: "123"}, "public": false, "payload": {"y": 2}}}
        h4 Errors
        h5 Recipient
        | When an error occurs:
        pre.prettyprint.language-javascript
          {"errors": [{"code": "xxx", description: "foo"}, {"code": "yyy", "description": "bar"}]}
